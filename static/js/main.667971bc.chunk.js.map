{"version":3,"sources":["firebase/firebase.js","helpers/readFromDb.js","App.js","index.js"],"names":["app","initializeApp","apiKey","process","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","db","getFirestore","getFunctions","getRootCollectionIds","a","collectionNames","getDocs","collection","forEach","doc","Object","keys","data","push","getLevelOneDocs","currentLocation","setLoading","docIds","id","getSubcollectionNamesInDoc","console","log","getSubCollections","httpsCallable","docPath","result","collections","message","details","fetchDocs","results","getDoc","docsObject","exists","App","useState","setCurrentLocation","setCollections","levelOneDocs","setLevelOneDocs","document","setDocument","loading","level","setLevel","openFolder","name","prev","useEffect","res","evenLevelDocData","rootLevelCalls","levelOneCalls","evenLevelCalls","onClick","temp","split","pop","prevLocation","join","className","length","map","index","onDoubleClick","xmlns","viewBox","fill","d","JSON","stringify","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.667971bc.chunk.js","sourcesContent":["import { initializeApp } from \"firebase/app\";\r\nimport { getFirestore } from \"firebase/firestore\";\r\nimport { getFunctions } from \"firebase/functions\";\r\n\r\n// import { getAnalytics } from \"firebase/analytics\";\r\n\r\nconst firebaseConfig = {\r\n  apiKey: process.env.REACT_APP_apiKey,\r\n  authDomain: process.env.REACT_APP_authDomain,\r\n  projectId: process.env.REACT_APP_projectId,\r\n  storageBucket: process.env.REACT_APP_storageBucket,\r\n  messagingSenderId: process.env.REACT_APP_messagingSenderId,\r\n  appId: process.env.REACT_APP_appId,\r\n  measurementId: process.env.REACT_APP_measurementId,\r\n};\r\n\r\n// Initialize Firebase\r\nconst app = initializeApp(firebaseConfig);\r\nconst db = getFirestore(app);\r\n\r\nconst functions = getFunctions(app);\r\n// const analytics = getAnalytics(app);\r\n\r\nexport { db, app, functions };\r\n","import { collection, doc, getDoc, getDocs } from \"@firebase/firestore\";\r\nimport { getFunctions, httpsCallable } from \"@firebase/functions\";\r\nimport { db } from \"../firebase/firebase\";\r\n\r\n// Root level -> get collection IDs\r\nexport async function getRootCollectionIds() {\r\n  let collectionNames = [];\r\n  const snap = await getDocs(collection(db, \"rootLevelDetails\"));\r\n\r\n  snap.forEach((doc) => {\r\n    const collection = Object.keys(doc.data());\r\n    if (collection[0] !== \"rootLevelDetails\")\r\n      collectionNames.push(...collection);\r\n  });\r\n  return collectionNames;\r\n}\r\n\r\n// level 1 -> Documents and sub collections\r\n//// for documentIds,\r\n\r\nexport async function getLevelOneDocs(currentLocation, setLoading) {\r\n  setLoading(true);\r\n  let docIds = [];\r\n  const snap = await getDocs(collection(db, currentLocation));\r\n  snap.forEach((doc) => {\r\n    docIds.push(doc.id);\r\n  });\r\n  setLoading(false);\r\n  return docIds;\r\n}\r\n\r\n// level 2 -> collections and data of previous level's documents\r\n//// for collectionIDs,\r\nexport async function getSubcollectionNamesInDoc(currentLocation, setLoading) {\r\n  console.log(`currentLocation`, currentLocation);\r\n  setLoading(true);\r\n  try {\r\n    const getSubCollections = httpsCallable(\r\n      getFunctions(),\r\n      \"getSubCollections\"\r\n    );\r\n\r\n    const result = await getSubCollections({ docPath: currentLocation });\r\n\r\n    const collections = result.data.collections;\r\n    setLoading(false);\r\n    return collections;\r\n  } catch (error) {\r\n    console.log(`error`, error);\r\n    console.log(`error.message`, error.message);\r\n    console.log(`error.details`, error.details);\r\n    setLoading(false);\r\n  }\r\n}\r\n\r\n// level 2 -> collections and data of previous level's documents\r\n//// for document data,\r\nexport async function fetchDocs(currentLocation, setLoading) {\r\n  setLoading(true);\r\n  let results = null;\r\n  const docsObject = await getDoc(doc(db, currentLocation));\r\n  if (docsObject.exists()) results = docsObject.data();\r\n\r\n  setLoading(false);\r\n  return results;\r\n}\r\n\r\n//level 3 -> similar to level 1\r\n","import { useEffect, useState } from \"react\";\nimport {\n  fetchDocs,\n  getLevelOneDocs,\n  getRootCollectionIds,\n  getSubcollectionNamesInDoc,\n} from \"./helpers/readFromDb\";\n\nfunction App() {\n  const [currentLocation, setCurrentLocation] = useState(\"\");\n  const [collections, setCollections] = useState(\"\");\n  const [levelOneDocs, setLevelOneDocs] = useState(\"\");\n  const [document, setDocument] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [level, setLevel] = useState(0);\n\n  async function openFolder(name) {\n    setCurrentLocation((prev) => (prev ? prev + \"/\" + name : name));\n    setLevel((prev) => prev + 1);\n  }\n\n  function back() {\n    const temp = currentLocation.split(\"/\");\n    temp.pop();\n    const prevLocation = temp.join(\"/\");\n    setCurrentLocation(prevLocation);\n    setLevel((prev) => prev - 1);\n  }\n\n  useEffect(() => {\n    async function rootLevelCalls() {\n      const res = await getRootCollectionIds();\n      setCollections(res);\n    }\n\n    async function levelOneCalls() {\n      const docIds = await getLevelOneDocs(currentLocation, setLoading);\n      setLevelOneDocs(docIds);\n    }\n\n    async function evenLevelCalls() {\n      const collectionNames = await getSubcollectionNamesInDoc(\n        currentLocation,\n        setLoading\n      );\n      setCollections(collectionNames);\n\n      const evenLevelDocData = await fetchDocs(currentLocation, setLoading);\n      setDocument(evenLevelDocData);\n    }\n\n    if (level === 0) rootLevelCalls();\n    else if (level % 2 === 1) {\n      levelOneCalls(currentLocation, setLoading);\n    } else if (level % 2 === 0) {\n      evenLevelCalls();\n    }\n  }, [currentLocation, level]);\n\n  return (\n    <>\n      {level > 0 && (\n        <button\n          onClick={back}\n          className=\"fixed px-4 py-1 mt-2 ml-2 text-white bg-blue-500 rounded-md cursor-pointer left-4 top-2\"\n        >\n          Back\n        </button>\n      )}\n\n      {loading ? (\n        <div className=\"fixed m-4 top-20 left-4\">Loading...</div>\n      ) : (\n        <main className=\"px-4 mt-20\">\n          {collections.length > 0 && (\n            <h1 className=\"mx-2 my-2 text-xl text-blue-500\">Collections</h1>\n          )}\n          <div className=\"flex flex-wrap items-center justify-start max-w-screen-md\">\n            {level % 2 === 0 &&\n              collections &&\n              collections.map((collection, index) => {\n                return (\n                  <div key={index}>\n                    <div\n                      className=\"flex flex-col items-center justify-center p-2 m-2 border rounded-md cursor-pointer select-none hover:bg-gray-200 \"\n                      onDoubleClick={() => openFolder(collection)}\n                    >\n                      <svg\n                        xmlns=\"http://www.w3.org/2000/svg\"\n                        className=\"w-20 h-20\"\n                        viewBox=\"0 0 20 20\"\n                        fill=\"#4571FF\"\n                      >\n                        <path d=\"M2 6a2 2 0 012-2h5l2 2h5a2 2 0 012 2v6a2 2 0 01-2 2H4a2 2 0 01-2-2V6z\" />\n                      </svg>\n                      {collection}\n                    </div>\n                  </div>\n                );\n              })}\n            {document && level !== 0 && level % 2 === 0 && (\n              <div className=\"w-full px-2 py-1 mt-4 border rounded-md\">\n                <h1 className=\"my-2 text-xl text-blue-500 border-b\">Data</h1>\n                <div>{JSON.stringify(document)}</div>\n              </div>\n            )}\n            {level % 2 === 1 &&\n              levelOneDocs &&\n              levelOneDocs.map((collection, index) => {\n                return (\n                  <div\n                    key={index}\n                    className=\"flex flex-col items-center justify-center p-2 m-2 border rounded-md cursor-pointer select-none hover:bg-gray-200 \"\n                    onDoubleClick={() => openFolder(collection)}\n                  >\n                    <svg\n                      xmlns=\"http://www.w3.org/2000/svg\"\n                      className=\"w-20 h-20\"\n                      viewBox=\"0 0 20 20\"\n                      fill=\"#4571FF\"\n                    >\n                      <path d=\"M2 6a2 2 0 012-2h5l2 2h5a2 2 0 012 2v6a2 2 0 01-2 2H4a2 2 0 01-2-2V6z\" />\n                    </svg>\n                    {collection}\n                  </div>\n                );\n              })}\n          </div>\n        </main>\n      )}\n    </>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport \"./index.css\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}